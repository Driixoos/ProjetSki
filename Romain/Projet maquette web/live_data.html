<!DOCTYPE html>
<html lang="fr">
<head>
    <script src="mqtt.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Données en Direct - Ski'Connect</title>
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            /* Structure flex pour coller le footer en bas */
            display: flex;
            flex-direction: column;
        }

        /* Nouveau wrapper pour le contenu */
        #wrapper {
            flex: 1;
        }

        header {
            background-color: #ADD8E6;
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .logo img {
            height: 50px;
            margin-right: 10px;
        }

        nav ul {
            list-style: none;
            display: flex;
            margin: 0;
            padding: 0;
        }

        nav ul li {
            margin-left: 20px;
        }

        nav ul li a {
            text-decoration: none;
            color: white;
            font-weight: bold;
            transition: color 0.3s;
        }

        nav ul li a:hover {
            color: #333;
        }

        .hero {
            background-color: #f1f7fc;
            text-align: center;
            padding: 4rem 2rem;
            border-bottom: 2px solid #ADD8E6;
        }

        .hero h1 {
            font-size: 2.5rem;
            color: #333;
        }

        .hero p {
            font-size: 1.2rem;
            color: #666;
            margin-top: 1rem;
        }

        .intro-text {
            max-width: 800px;
            margin: 2rem auto;
            text-align: justify;
            font-size: 1.2rem;
            line-height: 1.8;
            color: #444;
            padding: 0 1rem;
        }

        .data-section {
            max-width: 800px;
            margin: 2rem auto;
            padding: 1rem;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .data-section h2 {
            text-align: center;
            color: #333;
        }

        .station {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid #ddd;
        }

        .station:last-child {
            border-bottom: none;
        }

        .station-name {
            font-weight: bold;
            color: #444;
        }

        .station-data {
            display: flex;
            gap: 1rem;
        }

        .station-data span {
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-weight: bold;
        }

        .station-data .temp {
            background-color: #f9f9f9;
            color: #333;
        }

        .station-data .wind {
            background-color: #f9f9f9;
            color: #333;
        }

        .station-data .alert {
            background-color: #ffcccc;
            color: #a94442;
        }
        .station-data .no-alert{
            background-color: #ccffcc;
            color: #3c763d;
        }

        footer {
            text-align: center;
            padding: 1rem;
            background: #333;
            color: white;
            /* Push le footer en bas */
            margin-top: auto;
        }

        footer a {
            color: #FFA500;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <!-- Début du wrapper pour coller le footer en bas -->
    <div id="wrapper">
        <header>
            <div class="logo">
                <img src="Projet_Ski.png" alt="Logo Ski'Connect">
                Ski'Connect
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">Accueil</a></li>
                    <li><a href="features.html">Fonctionnalités</a></li>
                    <li><a href="live_data.html">Données en Direct</a></li>
                    <li><a href="historique.html">Historique des données</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </nav>
        </header>

        <div class="hero">
            <h1>Données en Temps Réel</h1>
            <p>Consultez les données actualisées en temps réel.</p>
        </div>

        <div class="intro-text">
            <p>
                Avec Ski'Connect, accédez en temps réel aux données météorologiques cruciales telles que la température et la vitesse du vent. Ces informations sont collectées en continu depuis les capteurs répartis dans les différentes stations. Suivez l'évolution des conditions météo instantanément pour une gestion optimisée et une sécurité renforcée.
            </p>
        </div>

        <div class="data-section">
            <h2>Données des Remontées</h2>
            <div class="station">
                <span class="station-name"><a href="MontBlanc.html">Remontées Mont Blanc</a></span>
                <div class="station-data">
                    <span class="temp">Temp: -5°C</span>
                    <span class="wind">Vent: 35 km/h</span>
                    <span class="no-alert">Pas d'Alerte Météo</span>
                </div>
            </div>
            <div class="station">
                <span class="station-name"><a href="AlpesSud.html">Remontées Alpes Sud</a></span>
                <div class="station-data">
                    <span class="temp">Temp: 0°C</span>
                    <span class="wind">Vent: 20 km/h</span>
                    <span class="no-alert">Pas d'Alerte Météo</span>
                </div>
            </div>
            <div class="station">
                <span class="station-name"><a href="Vosges.html">Remontées Vosges</a></span>
                <div class="station-data">
                    <span class="temp">Temp: -2°C</span>
                    <span class="wind">Vent: 85 km/h</span>
                    <span class="alert">Alerte Météo</span>
                </div>
            </div>
        </div>
    </div>
    <!-- Fin du wrapper -->

    <footer>
        <p>&copy; 2025 Ski'Connect. Tous droits réservés. <a href="legal.html">Mentions Légales</a> | <a href="contact.html">Contact</a></p>
    </footer>

</body>
</html>

<script>
    const alertThresholds = {
        temperature: -10, // Alerte si la température est <= -10°C
        windSpeed: 50 // Alerte si le vent est >= 50 km/h
    };

    const stationData = [
        { name: "Station Mont Blanc", temp: -5, wind: 45 },
        { name: "Station Alpes Sud", temp: 0, wind: 20 },
        { name: "Station Vosges", temp: -2, wind: 60 }
    ];

    const alerts = [];

    stationData.forEach(station => {
        if (station.temp <= alertThresholds.temperature || station.wind >= alertThresholds.windSpeed) {
            alerts.push({ name: station.name, reason: `Temp: ${station.temp}°C, Vent: ${station.wind} km/h` });
        }
    });

    // Enregistre les alertes dans un fichier JSON
    async function saveAlerts() {
        const response = await fetch('save_alerts.php', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(alerts)
        });
        console.log(await response.text());
    }

    saveAlerts();
</script>
